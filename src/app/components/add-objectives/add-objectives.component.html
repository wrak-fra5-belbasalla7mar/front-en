<div class="container mt-4">
    <h2>Add Objectives for User {{ userId }}</h2>
  
    <!-- Success Message -->
    <div class="alert alert-success" *ngIf="successMessage">
      <i class="bi bi-check-circle me-2"></i>{{ successMessage }}
    </div>
  
    <!-- Error Message -->
    <div class="alert alert-danger" *ngIf="errorMessage">
      <i class="bi bi-exclamation-triangle me-2"></i>{{ errorMessage }}
    </div>
  
    <!-- Objective Form -->
    <div class="card">
      <div class="card-header">Add New Objective</div>
      <div class="card-body">
        <div class="mb-3">
          <label for="objectiveTitle" class="form-label">Objective Title (max 100 characters)</label>
          <input
            type="text"
            id="objectiveTitle"
            class="form-control"
            [(ngModel)]="newObjective.title"
            placeholder="Enter objective title"
            maxlength="100"
            [disabled]="isLoading"
          />
        </div>
        <div class="mb-3">
          <label for="objectiveDescription" class="form-label">Description (Optional, max 500 characters)</label>
          <textarea
            id="objectiveDescription"
            class="form-control"
            [(ngModel)]="newObjective.description"
            placeholder="Enter objective description"
            maxlength="500"
            [disabled]="isLoading"
          ></textarea>
        </div>
        <div class="btn-group">
          <button
            class="btn btn-success me-2"
            (click)="saveObjective()"
            [disabled]="isLoading"
          >
            <i class="bi bi-check-circle me-1"></i>{{ isLoading ? 'Saving...' : 'Save Objective' }}
          </button>
          <button
            class="btn btn-secondary"
            [routerLink]="['/manage-cycles']"
            [disabled]="isLoading"
          >
            <i class="bi bi-arrow-left-circle me-1"></i>Back
          </button>
        </div>
      </div>
    </div>
  
    <!-- List of Existing Objectives -->
    <div class="card mt-4">
      <div class="card-header">Existing Objectives</div>
      <div class="card-body">
        <div *ngIf="objectives.length === 0 && !isLoading" class="text-muted">
          No objectives assigned yet.
        </div>
        <div *ngIf="isLoading" class="text-muted">
          <i class="bi bi-hourglass-split me-1"></i>Loading objectives...
        </div>
        <ul>
          <li *ngFor="let objective of objectives">
            {{ objective.title }}
            <span *ngIf="objective.completed" class="badge bg-success ms-2">Completed</span>
          </li>
        </ul>
      </div>
    </div>
  </div>